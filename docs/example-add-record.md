# Example: Adding a New DNS Record

## üìù Scenario: Add `newserver.example.com` ‚Üí `192.168.1.200`

### ‚ö° **Using BindCaptain Manager (Recommended)**

### Step 1: Add the A Record
```bash
sudo bash -c "source /opt/bindcaptain/bindcaptain_manager.sh && \
    bind.create_record newserver example.com 192.168.1.200"
```

Output will show:
```
================================
  BIND DNS Management Tool
  (Container-aware)
================================

Creating A Record
Compatible with BIND 9.16+ modern syntax
Hostname: newserver
Domain: example.com
IP: 192.168.1.200
TTL: 86400

‚úì A record created: newserver.example.com -> 192.168.1.200
```

### Step 2: Verify the Record
```bash
# Test the new record immediately
dig @192.168.1.1 newserver.example.com +short
# Should return: 192.168.1.200

# List all records to verify
sudo bash -c "source /opt/bindcaptain/bindcaptain_manager.sh && \
    bind.list_records example.com"
```

### Step 3: Check Reverse DNS (Auto-Generated)
```bash
# Test reverse lookup (will be auto-generated by cron within 5 minutes)
dig @192.168.1.1 -x 192.168.1.200 +short
# Should eventually return: newserver.example.com.

# Check if cron picked up the change
sudo tail /opt/bindcaptain/logs/dns_refresh.log
```

## üéØ That's it! 

‚úÖ **Serial number automatically incremented**  
‚úÖ **Zone validated before applying**  
‚úÖ **Backup created automatically**  
‚úÖ **BIND reloaded automatically**  
‚úÖ **Reverse DNS entry will be created** within 5 minutes by cron  
‚úÖ **Synology slaves automatically notified**

---

## üîÑ Adding a CNAME Record

If you want `web.example.com` to point to `newserver.example.com`:

### Edit Zone File:
```bash
sudo vi /opt/bindcaptain/config/example.com/example.com.db
```

### Add to CNAME section:
```dns
; CNAME Records
dsm                     IN      CNAME   dsm1
gitlab                  IN      CNAME   dsm1
web                     IN      CNAME   newserver     # ‚Üê NEW CNAME
wolfman                 IN      A       172.25.50.156
```

### Increment Serial, Validate, Restart:
```bash
# Update serial number in SOA (58)
sudo named-checkzone example.com /opt/bindcaptain/config/example.com/example.com.db
sudo podman restart bindcaptain

# Test
dig @192.168.1.1 web.example.com +short
# Should return: newserver.example.com.
#                192.168.1.200
```

**Remember:** Always increment the serial number for any zone file changes!
